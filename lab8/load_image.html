<!DOCTYPE html>
<html>
	<head>
      <meta charset="utf-8">
		<title>Lab 8: Procedural Generation</title>
		<style>
			body { margin: 0; }
			canvas { display: block; }
		</style>
	</head>
	<body>
      <script type="text/javascript"></script>
      <script src="../three.js-master/build/three.js"></script>
      <script src="../three.js-master/examples/js/controls/OrbitControls.js">
      </script>
      <script>
         //---------------------------------------------------------------------
         // IMAGE LOADING
         //---------------------------------------------------------------------
         //
         // this function loads the context for the canvas
         function initContext(canvasID, contextType)
         {
            var canvas = document.createElement('canvas');
            var context = canvas.getContext(contextType);
            return context;
         }
         
         // this loads the image, but mainly, when the image loads, 
         // it calls readImage()
         function loadImage(imageSource, context)
         {
            var imageObj = new Image();
            imageObj.onload = function()
            {
               context.drawImage(imageObj, 0, 0);
               // get image data samples each pixel from 
               // the first two  x,y coordinates to the latter two
               var imageData = context.getImageData(0, 0, planeSize, planeSize);
               readImage(imageData);
            };
            imageObj.src = imageSource;
         }
         // since this method is only called when the image is loaded, 
         //we know we have the image pixel data
         function readImage(imageData)
         {
            // since the imageData.data looks like 
            // this [r0, g0, b0, a0, r1, g1, b1, a1â€¦]
            // and since our noise is greyscale (rgb are all the same number)
            // we only need every fourth number to collect all the red values
            var noiseData = [];
            for(var i = 0; i < imageData.data.length; i+=4)
            {
               noiseData.push(imageData.data[i]); // just saving red component
               }
            }
            
            var context = initContext('canvas', '2d'); // initialize the canvas
            // load the perlin image
            loadImage('noise/perlin_100_100.jpg', context);
      </script>
   </body>
</html>

